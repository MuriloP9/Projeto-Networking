<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - ProLink</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Montserrat", sans-serif;
            background: linear-gradient(135deg, #060d49 0%, #0e1768 50%, #1a237e 100%);
            min-height: 100vh;
            color: #333;
            padding-top: 90px;
            position: relative;
            overflow-x: hidden;
        }

        /* Efeito de partículas/estrelas no fundo - mais intenso */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 15% 15%, rgba(255, 255, 255, 0.8) 2px, transparent 2px),
                radial-gradient(circle at 85% 85%, rgba(255, 255, 255, 0.6) 1px, transparent 1px),
                radial-gradient(circle at 35% 65%, rgba(255, 255, 255, 0.4) 1px, transparent 1px),
                radial-gradient(circle at 65% 35%, rgba(255, 255, 255, 0.5) 1px, transparent 1px),
                radial-gradient(circle at 25% 85%, rgba(255, 255, 255, 0.3) 1px, transparent 1px),
                radial-gradient(circle at 75% 25%, rgba(255, 255, 255, 0.7) 1px, transparent 1px),
                radial-gradient(circle at 45% 45%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
                radial-gradient(circle at 90% 10%, rgba(255, 255, 255, 0.4) 1px, transparent 1px),
                radial-gradient(circle at 10% 90%, rgba(255, 255, 255, 0.6) 1px, transparent 1px),
                radial-gradient(circle at 55% 75%, rgba(255, 255, 255, 0.3) 1px, transparent 1px);
            background-size: 80px 80px, 120px 120px, 60px 60px, 100px 100px, 90px 90px, 70px 70px, 110px 110px, 85px 85px, 95px 95px, 75px 75px;
            animation: twinkle 15s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes twinkle {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg);
                opacity: 0.8;
            }
            25% { 
                transform: translateY(-10px) rotate(90deg);
                opacity: 1;
            }
            50% { 
                transform: translateY(-20px) rotate(180deg);
                opacity: 0.6;
            }
            75% { 
                transform: translateY(-10px) rotate(270deg);
                opacity: 1;
            }
        }

        /* Header */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 50px;
            background: rgba(14, 23, 104, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3b6ebb, #1a237e);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(59, 110, 187, 0.4);
            font-size: 24px;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .back-btn {
            color: #ffffff;
            text-decoration: none;
            padding: 12px 24px;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            font-weight: 500;
            font-family: "Montserrat", sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .back-btn:hover {
            background: linear-gradient(45deg, #3b6ebb, #1a237e);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 110, 187, 0.4);
        }

        /* Container principal */
        .cadastro-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 170px);
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        .form-container {
            width: 100%;
            max-width: 480px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b6ebb, #1a237e, #3b6ebb);
            background-size: 200% 100%;
            animation: gradient-move 3s ease infinite;
        }

        @keyframes gradient-move {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .form-container h1 {
            text-align: center;
            color: #0e1768;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 700;
            position: relative;
        }

        .form-container h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #3b6ebb, #1a237e);
            border-radius: 2px;
        }

        /* Upload de foto */
        .upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }

        .upload-container label {
            font-weight: 600;
            color: #0e1768;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .avatar-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f2f5, #e1e5ea);
            border: 4px solid #3b6ebb;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            position: relative;
            box-shadow: 0 10px 25px rgba(59, 110, 187, 0.3);
            transition: all 0.3s ease;
        }

        .avatar-preview:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(59, 110, 187, 0.4);
        }

        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-label {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(45deg, #3b6ebb, #1a237e);
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(59, 110, 187, 0.3);
        }

        .upload-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 110, 187, 0.4);
        }

        .upload-instructions {
            font-size: 12px;
            color: #666;
            margin-top: 8px;
            text-align: center;
            font-style: italic;
        }

        /* Campos do formulário */
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #0e1768;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .form-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5ea;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(248, 249, 250, 0.8);
            font-family: "Montserrat", sans-serif;
        }

        .form-group input:focus {
            outline: none;
            border-color: #3b6ebb;
            background: white;
            box-shadow: 
                0 0 0 4px rgba(59, 110, 187, 0.1),
                0 4px 12px rgba(59, 110, 187, 0.15);
            transform: translateY(-1px);
        }

        .form-group input:focus + .form-label {
            color: #3b6ebb;
            transform: translateY(-2px);
        }

        /* Checkbox LGPD */
        .lgpd-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(59, 110, 187, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(59, 110, 187, 0.2);
        }

        .lgpd-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
            accent-color: #3b6ebb;
            cursor: pointer;
        }

        .lgpd-checkbox label {
            margin: 0;
            font-size: 14px;
            line-height: 1.4;
            cursor: pointer;
            color: #333;
        }

        .lgpd-checkbox a {
            color: #3b6ebb;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .lgpd-checkbox a:hover {
            text-decoration: underline;
            color: #1a237e;
        }

        /* Botão de submit */
        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #3b6ebb, #1a237e);
            color: white;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(59, 110, 187, 0.3);
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 110, 187, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(59, 110, 187, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Modal LGPD */
        .modal-lgpd {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .modal-content h2 {
            color: #0e1768;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            color: #999;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close:hover {
            color: #333;
            background: rgba(0, 0, 0, 0.1);
        }

        /* Footer */
        footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            padding: 15px;
            background: rgba(14, 23, 104, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 14px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 999;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .navbar {
                padding: 15px 20px;
            }
            
            .form-container {
                margin: 20px;
                padding: 30px 25px;
            }
            
            .form-container h1 {
                font-size: 28px;
            }
            
            .avatar-preview {
                width: 100px;
                height: 100px;
            }
        }

        @media (max-width: 480px) {
            .form-container {
                padding: 25px 20px;
            }
            
            .form-container h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo-container">
                <div class="logo-icon">🌐</div>
                <div class="logo">ProLink</div>
            </div>
            <a href="../php/index.php" class="back-btn">Voltar</a>
        </nav>
    </header>

    <main>
        <section class="cadastro-container">
            <div class="form-container">
                <h1>Criar Conta</h1>
                <form id="cadastroForm" action="../php/cadastro2.php" method="POST">
                    
                    <!-- Upload de Foto -->
                    <div class="form-group upload-container">
                        <label for="foto_perfil">Foto de Perfil</label>
                        <input type="file" id="foto_perfil" name="foto_perfil" accept="image/*" style="display: none;">
                    </div>

                    <!-- Nome -->
                    <div class="form-group">
                        <label for="nome">Nome Completo</label>
                        <input type="text" id="nome" name="nome" placeholder="Digite seu nome completo" required>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" placeholder="Digite seu melhor email" required>
                    </div>

                    <!-- Senha -->
                    <div class="form-group">
                        <label for="senha">Senha</label>
                        <input type="password" id="senha" name="senha" placeholder="Crie uma senha segura" required>
                    </div>

                    <!-- Data de Nascimento -->
                    <div class="form-group">
                        <label for="dataNascimento">Data de Nascimento</label>
                        <input type="date" id="dataNascimento" name="dataNascimento" required>
                    </div>

                    <!-- LGPD -->
                    <div class="lgpd-checkbox">
                        <input type="checkbox" id="aceitoLGPD" name="aceitoLGPD" required>
                        <label for="aceitoLGPD">
                            Li e aceito os <a href="#" id="lgpdLink">Termos de Política de Privacidade e LGPD</a>
                        </label>
                    </div>

                    <button type="button" id="submitBtn" class="submit-btn">
                        Criar Minha Conta
                    </button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 ProLink. Todos os direitos reservados.</p>
    </footer>

    <!-- Modal LGPD -->
    <div id="lgpdModal" class="modal-lgpd">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Termos de Política de Privacidade e LGPD</h2>
            <div id="lgpdTermsContent">
                <p>Ao se cadastrar em nossa plataforma, você concorda com os seguintes termos:</p>
                <ol>
                    <li><strong>Coleta de Dados:</strong> Coletamos informações pessoais como nome, e-mail, data de nascimento e outras informações necessárias para o funcionamento da plataforma.</li>
                    <li><strong>Uso dos Dados:</strong> Seus dados serão utilizados para personalizar sua experiência, fornecer serviços e melhorar nossa plataforma.</li>
                    <li><strong>Compartilhamento:</strong> Não compartilhamos seus dados pessoais com terceiros sem seu consentimento, exceto quando exigido por lei.</li>
                    <li><strong>Segurança:</strong> Implementamos medidas de segurança para proteger seus dados contra acesso não autorizado.</li>
                    <li><strong>Seus Direitos:</strong> Você tem o direito de acessar, corrigir, excluir ou portar seus dados pessoais a qualquer momento.</li>
                    <li><strong>Alterações:</strong> Esta política pode ser atualizada periodicamente, com aviso prévio aos usuários.</li>
                </ol>
                <p>Para exercer seus direitos ou ter dúvidas sobre o tratamento de seus dados, entre em contato conosco.</p>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Pré-visualização da foto de perfil
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('foto_perfil');
            const uploadContainer = fileInput.parentElement;
            
            const avatarPreview = document.createElement('div');
            avatarPreview.className = 'avatar-preview';
            
            const previewImage = document.createElement('img');
            previewImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRjBGMkY1Ii8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iMzciIHI9IjE4IiBmaWxsPSIjQzBDNENFIi8+CjxwYXRoIGQ9Ik0yMCA4MEMyMCA2Ni43NDUyIDMxLjE5MjkgNTYgNDUgNTZINTVDNjguODA3MSA1NiA4MCA2Ni43NDUyIDgwIDgwVjEwMEgyMFY4MFoiIGZpbGw9IiNDMEM0Q0UiLz4KPHN2Zz4K';
            previewImage.alt = '.';
            avatarPreview.appendChild(previewImage);
            
            // Insere o preview após o label, mas antes do input oculto
            const label = uploadContainer.querySelector('label');
            label.parentNode.insertBefore(avatarPreview, label.nextSibling);
            
            const uploadLabel = document.createElement('label');
            uploadLabel.htmlFor = 'foto_perfil';
            uploadLabel.className = 'upload-label';
            uploadLabel.textContent = 'Escolher Foto';
            avatarPreview.parentNode.insertBefore(uploadLabel, avatarPreview.nextSibling);
            
            const instructions = document.createElement('div');
            instructions.className = 'upload-instructions';
            instructions.textContent = 'Clique para selecionar uma imagem (JPG, PNG, GIF)';
            uploadLabel.parentNode.insertBefore(instructions, uploadLabel.nextSibling);
            
            fileInput.addEventListener('change', function(e) {
                if (fileInput.files && fileInput.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                        avatarPreview.classList.add('has-image');
                    }
                    
                    reader.readAsDataURL(fileInput.files[0]);
                }
            });
        });

        // Modal LGPD
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById("lgpdModal");
            const btn = document.getElementById("lgpdLink");
            const span = document.getElementsByClassName("close")[0];
            
            btn.onclick = function(e) {
                e.preventDefault();
                modal.style.display = "block";
            }
            
            span.onclick = function() {
                modal.style.display = "none";
            }
            
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        });

        // Sistema de proteção e cadastro (mantendo todas as proteções originais)
        $(document).ready(function () {
            const SECURITY_CONFIG = {
                originalFieldsConfig: {
                    'nome': { type: 'text', required: true, name: 'nome' },
                    'email': { type: 'email', required: true, name: 'email' },
                    'senha': { type: 'password', required: true, name: 'senha' },
                    'dataNascimento': { type: 'date', required: true, name: 'dataNascimento' },
                    'foto_perfil': { type: 'file', required: false, name: 'foto_perfil' },
                    'aceitoLGPD': { type: 'checkbox', required: true, name: 'aceitoLGPD' }
                },
                
                originalFormStructure: null,
                isReloading: false,
                violationDetected: false,
                devToolsOpen: false,
                checkInterval: 5000,
                devToolsThreshold: 160,
                maxViolations: 2,
                violationCount: 0
            };

            function captureOriginalStructure() {
                const structure = {};
                Object.keys(SECURITY_CONFIG.originalFieldsConfig).forEach(function(fieldId) {
                    const field = document.getElementById(fieldId);
                    if (field) {
                        structure[fieldId] = {
                            tagName: field.tagName,
                            type: field.type,
                            name: field.name,
                            required: field.required,
                            exists: true
                        };
                    }
                });
                
                const submitBtn = document.getElementById('submitBtn');
                if (submitBtn) {
                    structure.submitBtn = {
                        tagName: submitBtn.tagName,
                        type: submitBtn.type,
                        id: submitBtn.id,
                        exists: true
                    };
                }
                
                return structure;
            }

            SECURITY_CONFIG.originalFormStructure = captureOriginalStructure();

            function verificarIntegridade() {
                if (SECURITY_CONFIG.isReloading || SECURITY_CONFIG.violationDetected) {
                    return true;
                }

                let currentViolations = 0;
                const violations = [];

                try {
                    Object.keys(SECURITY_CONFIG.originalFieldsConfig).forEach(function(fieldId) {
                        const field = document.getElementById(fieldId);
                        const originalConfig = SECURITY_CONFIG.originalFieldsConfig[fieldId];
                        const originalStructure = SECURITY_CONFIG.originalFormStructure[fieldId];
                        
                        if (!field) {
                            violations.push(`Campo crítico removido: ${fieldId}`);
                            currentViolations++;
                            return;
                        }

                        if (field.tagName !== originalStructure.tagName) {
                            violations.push(`Tag alterada no campo: ${fieldId}`);
                            currentViolations++;
                        }
                        
                        if (field.type !== originalConfig.type) {
                            violations.push(`Tipo alterado no campo: ${fieldId}`);
                            currentViolations++;
                        }
                        
                        if (field.name !== originalConfig.name) {
                            violations.push(`Name alterado no campo: ${fieldId}`);
                            currentViolations++;
                        }

                        if (originalConfig.required && !field.required) {
                            violations.push(`Required removido do campo obrigatório: ${fieldId}`);
                            currentViolations++;
                        }
                    });

                    const submitBtn = document.getElementById('submitBtn');
                    if (!submitBtn) {
                        violations.push('Botão de submit foi removido');
                        currentViolations++;
                    } else if (submitBtn.tagName !== 'BUTTON' && submitBtn.tagName !== 'INPUT') {
                        violations.push('Botão de submit foi alterado');
                        currentViolations++;
                    }

                    if (SECURITY_CONFIG.devToolsOpen) {
                        const suspiciousElements = document.querySelectorAll(
                            'input[type="hidden"][name]:not([name="foto_perfil"]), ' +
                            'script[src*="inject"], ' +
                            'iframe[style*="display:none"], ' +
                            'form[action]:not([action*="cadastro2.php"])'
                        );
                        
                        if (suspiciousElements.length > 0) {
                            violations.push('Elementos suspeitos detectados');
                            currentViolations++;
                        }
                    }

                    const formElement = document.getElementById('cadastroForm');
                    if (!formElement || formElement.tagName !== 'FORM') {
                        violations.push('Formulário foi removido ou substituído');
                        currentViolations++;
                    }

                    if (currentViolations > 0) {
                        SECURITY_CONFIG.violationCount += currentViolations;
                        
                        console.warn('⚠️ Violações detectadas:', violations);
                        
                        if (SECURITY_CONFIG.violationCount >= SECURITY_CONFIG.maxViolations || 
                            violations.some(v => v.includes('removido') || v.includes('substituído'))) {
                            
                            SECURITY_CONFIG.violationDetected = true;
                            reloadPageWithWarning(violations);
                            return false;
                        }
                    }

                    return true;

                } catch (error) {
                    console.error('Erro na verificação de integridade:', error);
                    return true;
                }
            }

            function reloadPageWithWarning(violations) {
                if (SECURITY_CONFIG.isReloading) return;
                
                SECURITY_CONFIG.isReloading = true;
                
                console.warn('🚨 TENTATIVA DE TAMPERING DETECTADA!');
                console.warn('Violações:', violations);
                
                alert('⚠️ ALTERAÇÃO NÃO AUTORIZADA DETECTADA!\n\nPor motivos de segurança, a página será recarregada.\n\nEvite modificar os elementos do formulário.');
                
                try {
                    $('#cadastroForm')[0].reset();
                    sessionStorage.clear();
                } catch (e) {
                    console.warn('Erro ao limpar dados:', e);
                }
                
                setTimeout(function() {
                    window.location.reload(true);
                }, 1500);
            }

            function detectDevTools() {
                let devToolsDetected = false;
                
                if (window.outerHeight - window.innerHeight > SECURITY_CONFIG.devToolsThreshold || 
                    window.outerWidth - window.innerWidth > SECURITY_CONFIG.devToolsThreshold) {
                    devToolsDetected = true;
                }
                
                try {
                    if (window.console && typeof window.console.clear === 'function') {
                        const consoleCheck = window.console.clear.toString();
                        if (consoleCheck.includes('[native code]') || consoleCheck.length < 100) {
                            devToolsDetected = true;
                        }
                    }
                } catch (e) {
                    devToolsDetected = true;
                }
                
                if (window.screen && window.screen.availHeight && window.screen.height) {
                    if (window.screen.availHeight < window.screen.height - 100) {
                        devToolsDetected = true;
                    }
                }
                
                if (devToolsDetected && !SECURITY_CONFIG.devToolsOpen) {
                    SECURITY_CONFIG.devToolsOpen = true;
                    console.warn('🚨 FERRAMENTAS DE DESENVOLVEDOR DETECTADAS!');
                    console.warn('⚠️ Modificações no formulário serão monitoradas!');
                } else if (!devToolsDetected && SECURITY_CONFIG.devToolsOpen) {
                    SECURITY_CONFIG.devToolsOpen = false;
                    console.log('🛡️ Ferramentas de desenvolvedor fechadas');
                }
            }

            function realizarCadastro() {
                if (!verificarIntegridade()) {
                    return;
                }
                
                const nome = $('#nome').val().trim();
                const email = $('#email').val().trim();
                const senha = $('#senha').val();
                const dataNascimento = $('#dataNascimento').val();
                const aceitoLGPD = $('#aceitoLGPD').is(':checked');
                
                // Validações básicas
                if (!nome || !email || !senha || !dataNascimento) {
                    alert('Por favor, preencha todos os campos obrigatórios!');
                    return;
                }
                
                if (!validateEmail(email)) {
                    alert('Por favor, insira um email válido!');
                    return;
                }
                
                if (senha.length < 6) {
                    alert('A senha deve ter pelo menos 6 caracteres!');
                    return;
                }
                
                if (!aceitoLGPD) {
                    alert('Você deve aceitar os termos de política de privacidade e LGPD!');
                    return;
                }
                
                // Validação de idade baseada na data de nascimento
                const hoje = new Date();
                const nascimento = new Date(dataNascimento);
                let idade = hoje.getFullYear() - nascimento.getFullYear();
                const m = hoje.getMonth() - nascimento.getMonth();
                
                if (m < 0 || (m === 0 && hoje.getDate() < nascimento.getDate())) {
                    idade--;
                }
                
                if (idade < 18) {
                    alert('Você deve ter pelo menos 18 anos para se cadastrar!');
                    return;
                }
                
                if (nascimento > hoje) {
                    alert('Data de nascimento não pode ser futura!');
                    return;
                }
                
                // Validações de tamanho
                if (email.length > 100 || senha.length > 255 || nome.length > 100) {
                    alert('Um ou mais campos excedem o tamanho máximo permitido!');
                    return;
                }
                
                const formData = new FormData($('#cadastroForm')[0]);
                
                $('#submitBtn').prop('disabled', true).html('Criando conta...');
                
                $.ajax({
                    url: '../php/cadastro2.php',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        if (response.trim() === "ok") {
                            alert('Cadastro realizado com sucesso! Redirecionando...');
                            window.location.href = '../pages/inclusaoCadastro.html';
                        } else {
                            alert(response);
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error('Erro na requisição:', error);
                        alert('Erro na comunicação com o servidor. Tente novamente.');
                    },
                    complete: function () {
                        setTimeout(function() {
                            $('#submitBtn').prop('disabled', false).html('Criar Minha Conta');
                        }, 2000);
                    }
                });
            }

            function validateEmail(email) {
                const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return regex.test(email);
            }

            // Event Listeners
            $('#submitBtn').on('click', function () {
                realizarCadastro();
            });

            $('#cadastroForm input').on('keypress', function (e) {
                if (e.which === 13 && !$(this).is('#senha')) { // Enter, exceto no campo senha
                    realizarCadastro();
                }
            });

            // Observer para mudanças no DOM
            const observer = new MutationObserver(function(mutations) {
                let shouldCheck = false;
                
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.target.id) {
                        const fieldId = mutation.target.id;
                        if (SECURITY_CONFIG.originalFieldsConfig[fieldId]) {
                            if (mutation.attributeName === 'type' || 
                                mutation.attributeName === 'name' || 
                                mutation.attributeName === 'required') {
                                shouldCheck = true;
                            }
                        }
                    }
                    
                    if (mutation.type === 'childList' && mutation.removedNodes.length > 0) {
                        for (let i = 0; i < mutation.removedNodes.length; i++) {
                            const node = mutation.removedNodes[i];
                            if (node.nodeType === Node.ELEMENT_NODE && 
                                (node.id === 'submitBtn' || SECURITY_CONFIG.originalFieldsConfig[node.id])) {
                                shouldCheck = true;
                                break;
                            }
                        }
                    }
                });
                
                if (shouldCheck) {
                    setTimeout(verificarIntegridade, 500);
                }
            });
            
            const formElement = document.getElementById('cadastroForm');
            if (formElement) {
                observer.observe(formElement, {
                    attributes: true,
                    childList: true,
                    subtree: true,
                    attributeFilter: ['type', 'name', 'required', 'action', 'method']
                });
            }

            // Verificações periódicas
            setInterval(verificarIntegridade, SECURITY_CONFIG.checkInterval);
            setInterval(detectDevTools, 2000);

            // Proteção contra atalhos de teclado
            document.addEventListener('keydown', function(e) {
                if (e.keyCode === 123 || 
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
                    (e.ctrlKey && e.keyCode === 85)) {
                    
                    e.preventDefault();
                    console.warn('🚨 Tentativa de acesso às ferramentas de desenvolvedor!');
                    return false;
                }
            });

            // Proteção contra clique direito
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });

            // Verificação inicial
            setTimeout(function() {
                verificarIntegridade();
                console.log('🛡️ Sistema de proteção anti-tampering ativado!');
            }, 2000);

            // Reset do contador de violações
            setInterval(function() {
                if (SECURITY_CONFIG.violationCount > 0) {
                    SECURITY_CONFIG.violationCount = Math.max(0, SECURITY_CONFIG.violationCount - 1);
                }
            }, 30000);
        });
    </script>
</body>
</html>